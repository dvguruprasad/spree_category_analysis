$(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
              zoomType: 'xy'
            },
              title: {
                  text: 'Promotion Simulator'
              },
              xAxis: [{
                  categories: ['Current Week', 'Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5']
              }],
              yAxis: [{ // Primary yAxis
                  labels: {
                      formatter: function() {
                          return this.value;
                      },
              style: {
                  color: '#89A54E'
              }
                  },
              title: {
                  text: '<%= Spree::Config[:currency] %>',
                  style: {
                      color: '#89A54E'
                  }
              }
              },{
                  labels: {
                      formatter: function() {
                          return this.value;
                      },
              style: {
                  color: '#89B64E'
              }
                  },
              title: {
                  text: 'Units',
                  style: {
                      color: '#89B64E'
                  }
              },
              opposite: true
              }
              ],
              tooltip: {
                formatter: function() {
                    var unit = {
                        'Inventory': 'units',
                        'Target Sale': '<%= Spree::Config[:currency] %>',
                        'SalesLastYear': '<%= Spree::Config[:currency] %>',
                        'Sales': '<%= Spree::Config[:currency] %>',
                        'Forecast': '<%= Spree::Config[:currency] %>',
                    }[this.series.name];
    
                    return ''+
                        this.x +': '+ this.y +' '+ unit;
                }
            },
            legend: {
                layout: 'horizontal',
                align: 'left',
                x: 120,
                verticalAlign: 'top',
                y: 100,
                floating: true,
                backgroundColor: '#FFFFFF'
            },
            series: [{
                name: 'Inventory',
                color: '#E47833',
                type: 'column',
                yAxis: 1,
                data: inventory_positions

            }, {
                name: 'Target Sale',
                color: '#89A54E',
                type: 'line',
                yAxis: 0,
                data: [sum_target_revenue,sum_target_revenue,sum_target_revenue,sum_target_revenue,sum_target_revenue,sum_target_revenue]
            },{
                name: 'SalesLastYear',
                color: '#8B2500',
                type: 'line',
                yAxis: 0,
                data: sales_last_year
            },{
                name: 'Sales',
                color: '#8B2500',
                type: 'line',
                yAxis: 0,
                data: sales_revenue
            },{
                name: 'Forecast',
                color: '#A54E89',
                type: 'line',
                yAxis: 0,
                data: cumulative_sale

            }]
        });
    });

});
